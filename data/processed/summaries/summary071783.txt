NEW: Obama will unveil new guidelines Wednesday to cut down on earmarks.
Spending bill including more than $8 billion in earmarks passes.
Critics blast White House for earmarks; Obama staff says they inherited bill.
McCain: Vote shows "business as usual" remained order of the day.
