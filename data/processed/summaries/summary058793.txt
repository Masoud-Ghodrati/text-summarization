NEW: ACLU welcomes the agreement.
A federal judge still needs to approve the agreement.
Investigation found police used excessive force to suppress free speech.
It also cited unconstitutional stops, searches and arrests.
