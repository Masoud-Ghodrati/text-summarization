NEW: It's unclear how Alexis got a shotgun past security.
NEW: A Washington police officer ended the 30-minute spree by killing Alexis, mayor says.
Alexis had issues in the Navy and with police, but still had security clearance.
Authorities don't know his motive, and friends say they're surprised by attack.
