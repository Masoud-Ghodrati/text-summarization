Britney Spears must submit to random drug tests twice a week, judge orders.
Spears is in bitter custody battle with ex-husband, Kevin Federline.
Pop singer has a new album due out in November.
Spears, Federline were married for two years; divorce was finalized in July.
