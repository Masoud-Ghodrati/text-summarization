NEW: The roughly $555 billion budget measure passed 76-17.
Democrats failed to tie war funding to plan to withdraw U.S. troops from Iraq.
Bill has nearly 9,000 earmarks worth $7.4 billion, watchdog group says.
Measure now goes back to House for approval in its revised form.
